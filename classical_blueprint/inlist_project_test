

! For the sake of future readers of this file (yourself included),
! ONLY include the controls you are actually using.  DO NOT include
! all of the other controls that simply have their default values.

&star_job


  ! save a model at the end of the run
  	load_saved_model = .true.
	load_model_filename = '../initial_model/initial_models/standard_solar_model'



! change form lnd to lnPgas
	!change_lnPgas_flag = .true.
	!new_lnPgas_flag = .TRUE.



! set initial composition and nuclear reaction network
  	set_uniform_initial_composition = .false.
  	initial_zfracs = 8 

	change_net = .true.
	new_net_name = 'pp_and_cno_extras.net' !'basic.net' 
	change_initial_net = .true.
	set_initial_age = .true.
	set_initial_model_number = .true.
	set_initial_cumulative_energy_error = .true.



! display on-screen plots
	pgstar_flag = .true.
	pause_before_terminate = .true.

	change_v_flag = .true.
	new_v_flag = .true. !.false.

    	set_initial_dt = .true.
	years_for_initial_dt = 0.0001

	
/ !end of star_job namelist


&eos
  ! eos options
  ! see eos/defaults/eos.defaults

/ ! end of eos namelist


&kap
  ! kap options
  ! see kap/defaults/kap.defaults
  use_Type2_opacities = .true.
! set opacity tables
	kap_file_prefix = 'OP_a09_nans_removed_by_hand'
	Zbase = 0.01802


/ ! end of kap namelist
&controls

	mesh_delta_coeff = 1.0!0.25
	!max_dq = 1d-3
	max_allowed_nz = 1000000
	R_function_weight = 1d2
        T_function2_weight = 10!4d3!10
	T_function1_weight = 250

      min_dq_for_xa = 1d-4    ! avoid over-resolving composition changes

    !log_tau_function_weight = 200!100
    !log_kap_function_weight = 150!100






! composition controls
	x_ctrl(1) = 20			! deuterium abundance in ppm	
	x_ctrl(2) = 85			! he3 abundance in ppm	
	x_ctrl(3) = 1.0			! end mass
	initial_z = 0.01802

! mixing controls
        MLT_option = 'TDC'
	use_Ledoux_criterion = .true.

	set_min_D_mix = .true.
	min_D_mix = 1d-2 !0d0

	mixing_length_alpha = 1.9 !2.2 !1.8   
	overshoot_scheme(1) = 'exponential'
	overshoot_zone_type(1) = 'any'
	overshoot_zone_loc(1) = 'any'
	overshoot_bdy_loc(1) = 'top'

	overshoot_f(1) = 0.01d0
	overshoot_f0(1) = 0.005d0

	overshoot_scheme(2) = 'exponential'
	overshoot_zone_type(2) = 'any'
	overshoot_zone_loc(2) = 'any'
	overshoot_bdy_loc(2) = 'bottom'

	overshoot_f(2) = 0.005d0
	overshoot_f0(2) = 0.0025d0

	prune_bad_cz_min_Hp_height = 0.1
 	prune_bad_cz_min_log_eps_nuc = 99

	min_convective_gap = 0.1


! stop after reaching main sequence
	xa_central_lower_limit_species(1) = 'h1'
	xa_central_lower_limit(1) = 0.01

! convective mixing
	do_conv_premix = .true.


! semiconvection
      alpha_semiconvection = 1d0!1d-2!0
      semiconvection_option = 'Langer_85 mixing; gradT = gradr'

! accretion controls	
	accrete_same_as_surface = .false.
	accretion_zfracs = 8

	use_other_energy = .true.
	use_other_adjust_mdot = .true.
	mass_change = 1.25d-5

! output options
	history_interval = 1


! convergence_controls
	
	max_resid_jump_limit = 1d99
	scale_max_correction = 0.1
	varcontrol_target = 1d-4


	tiny_corr_coeff_limit = 5000
	!delta_lgL_limit = 1d-2!0.001d0
	!delta_lgT_limit = 1d-2!1d-3!0.005d0


        ! extra controls for timestep
        delta_lg_star_mass_limit = 2d-3 ! RECOMMENDED 2d-3
        delta_lgRho_cntr_limit = 1d-3!0.001d0 !0.0025d0 ! RECOMMENDED 0.0025d0
        delta_lgRho_cntr_hard_limit = 0.005d0 ! RECOMMENDED 0.005d0

! central temperature changes
!      delta_lgT_cntr_limit_only_after_near_zams = .true.
      delta_lgT_cntr_limit = 1d-3!0.001  ! 0.002  
      delta_lgT_cntr_hard_limit =1d-1! 0.01

! on any temperature changes, mainly to capture off-center flames
!      delta_lgT_max_limit_only_after_near_zams = .true.
      delta_lgT_max_limit = 1d-3!0.001  ! 0.002     
      delta_lgT_max_hard_limit = 0.001


      delta_lgT_limit = 1d-3
      delta_lgT_hard_limit = 0.0025
     ! on any temperature changes, mainly to capture off-center flames
      delta_lgL_limit = 1d-3 
      delta_lgL_hard_limit = 0.0025

	!timestep_factor_for_retries = 0.9
	min_timestep_factor = 0.7
	max_timestep_factor = 1.1
	corr_coeff_limit = 0.001d0

	!okay_to_reduce_gradT_excess = .true.
	!gradT_excess_max_logT = 7
	

    superad_reduction_Gamma_limit_scale = 5d0
    superad_reduction_Gamma_inv_scale = 5d0
    superad_reduction_diff_grads_limit = 1d-2
    superad_reduction_limit = -1d0


! output frequency section:
       photo_interval         = 100!1000
       photo_digits           = 8
       profile_interval       = 5000!100 ! set to 10 during H and He burning in inlist_03
       max_num_profile_models = 400000
       history_interval       = 1
       !terminal_interval      = 10
       write_header_frequency = 10


! energy equation model:
      energy_eqn_option = 'dedt'

      make_gradr_sticky_in_solver_iters = .true.
    
      fix_d_eos_dxa_partials = .true.
      xa_scale = 1d-5
      iter_for_resid_tol2 = 10

! accretion controls	
	x_integer_ctrl(1) = 19		! accretion history 
	x_ctrl(5) = 0.1 !control for linear change of energy






    use_superad_reduction = .true.
    superad_reduction_Gamma_limit = 0.3d0!0.3!0.5d0

    x_ctrl(6) = 1d-5 ! accretion rates above lead to shorter timesteps

      convergence_ignore_equL_residuals = .false. 
      make_gradr_sticky_in_solver_iters = .true.

! Atmosphere 
    mlt_make_surface_no_mixing = .true.


! solver section:! From inlist_ppisn

   solver_max_tries_before_reject = 30
   max_tries_for_retry = 30
   max_tries_after_5_retries = 40
   max_tries_after_10_retries = 40
   max_tries_after_20_retries = 40
   corr_coeff_limit = 1d-10
   relax_use_gold_tolerances = .false.
   use_gold_tolerances = .true.
   use_gold2_tolerances = .false.

   gold_iter_for_resid_tol2 = 10
   gold_iter_for_resid_tol3 = 10
   gold_tol_residual_norm3 = 1d-6
   gold_tol_max_residual3 = 1d-6
   gold_solver_iters_timestep_limit = 20
   solver_iters_timestep_limit = 50
   ignore_too_large_correction = .true.

    


! Asteroseismology controls
	num_cells_for_smooth_gradL_composition_term = 0    
	calculate_Brunt_N2 = .true.
	pulse_data_format = 'GYRE'
	write_pulse_data_with_profile = .true.
	add_atmosphere_to_pulse_data = .true.
	add_center_point_to_pulse_data = .true.
	keep_surface_point_for_pulse_data = .true.
	add_double_points_to_pulse_data = .true.
	interpolate_rho_for_pulse_data = .true.
	threshold_grad_mu_for_double_point = 5d0

! debugging_controls
	report_solver_progress = .true.
	!photo_interval = 50
	!report_ierr = .true.
	
	terminal_interval = 10
	!energy_eqn_option = 'eps_grav'
	max_abs_rel_run_E_err = 1d99
	limit_for_rel_error_in_energy_conservation = 1d9
        hard_limit_for_rel_error_in_energy_conservation = 1d9
/ ! end of controls namelist
